{% extends 'index.html' %}

{% block content%}



<div class="title-tab bg-gradient">Patient List</div>

<div class="container1">
  <!--SIDE MENU-->
  {% include "sidemenu.html" %}

  <!--Add new patient form-->
  <div class="reg-area">
    <form method="POST">
      {% csrf_token %}
    <div class="title-form bg-gradient">Add Medicines</div>
    <div class="reg-row">
        <div class="medicine-col">
          <label class="reg-label">Medicine Name</label><br />
          <input class="medicine-input" name="medname" required />
        </div>
        <div class="medicine-col">
          <label class="reg-label">Dosage</label><br />
          <input class="medicine-input" name="dosage" style="width: 50%;" required/>
        </div>
    </div>

    <div class="reg-row">
        <div class="medicine-col">        
          <button class="btn-save" type="submit" name="save">save medicine</button>
        </div>   
    </div>
  </form>
  </div>
  
</div> <!--container1-->

<!--Table container-->
<div class="container3">
  <div class="table-title bg-gradient">Medicine List</div>
  <div class="table-box">
    
    
      <!--PATIENTS TABLE-->
      <table id="medicine-table" class="medicine-tables">
        <thead >
          <th>#</th>
          <th>Medicine Name</th>
          <th>Dosage</th>
          <th>Actions</th>
        </thead>
        
        <tbody>
          {% for meds in medicinedata %}
          <tr>
            <td name="medID">{{meds.id}}</td>
            <td>{{meds.medicine_name}}</td>
            <td>{{meds.dosage}}</td>           
            <td id="actions_cell">
              
              <button name="updatedetails" type='submit' value="{{meds.id}}" id="link-edit"><i class="bi bi-pencil-square" data-bs-toggle="modal" data-bs-target="#{{meds.id}}"></i></button>
              <form action="{% url "medications" meds.id %}" method="POST">
                {% csrf_token %}
              <button name="delete" type='submit' value="{{meds.id}}" id="link-delete"><i class="bi bi-trash3"></i></button>
              </form>
              {% comment %} <button id="link-delete"><i class="bi bi-trash3"></i></button> {% endcomment %}
              <!-- Modal -->
      <div class="modal fade" id="{{meds.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
        
          <div class="modal-content">
            <div class="title-form bg-gradient">Edit Record</div>
            <form action="{% url "medications" meds.id %}" method="POST">
              {% csrf_token %}
            <div class="reg-row">
              <div class="medicine-col"  style="width: 35%;" >
                <label class="reg-label">Medicine #</label><br />
                <input class="medicine-input" value="{{meds.id}}" name="medID{{meds.id}}" disabled/>
              </div>
              <div class="medicine-col">
                <label class="reg-label">Medicine Name</label><br />
                <input class="medicine-input" value="{{meds.medicine_name}}" name="medname{{meds.id}}" required/>
              </div>
              <div class="medicine-col" style="width: 40%;">
                <label class="reg-label">Dosage</label><br />
                <input class="medicine-input" value="{{meds.dosage}}" name="dosage{{meds.id}}" style="width: 90%;" required/>
              </div>
          </div>

          <div class="reg-row">
              <div class="medicine-col">  
                      
                <button class="btn-save" type="submit" name="update">Update</button>
                 
              </div>   
          </div>
        </form>
          </div>
          
        </div>
      </div>
                    
                 
     

             
           
              
           
              
            </td>          
          </tr>
          {% endfor %}
          
        </tbody>
        <form method="POST">
      </table>
      
     
    </form>

  </div>
</div>



{%endblock%}
